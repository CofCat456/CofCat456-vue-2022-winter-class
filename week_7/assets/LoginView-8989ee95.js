import{F as f,a as g,E as w,c as V,b as _}from"./object-4056c4fd.js";import{l as v}from"./api-fb50adcd.js";import{_ as k,l as y,j as F,r as i,o as l,c as d,e as s,d as t,w as S,n as h}from"./index-f9a2aef5.js";const E={components:{VForm:f,VField:g,VErrorMessage:w},data:()=>({loadingStatus:!1}),computed:{schema(){return V({account:_().email("請輸入正確的 Email 格式 ㅍ_ㅍ!!").required("請輸入 Email !!"),password:_().min(6,"密碼長度不得小於 6").required("請輸入密碼!!")})}},methods:{handleSubmit(c){this.loadingStatus=!0;const{account:m,password:u}=c;v({username:m,password:u}).then(a=>{this.loadingStatus=!1;const{data:{success:e,message:o,token:n,expired:r}}=a;e&&(document.cookie=`token=${n};expires=${new Date(r)};`,this.$router.push({name:"AdminProductList"})),y(e,o)}).catch(a=>{this.loadingStatus=!1;const{response:e}=a;F(e)})}}},x={class:"container position-absolute top-50 start-50 translate-middle text-center"},M={class:"row justify-content-center"},$=s("h1",{class:"h3 mb-4 font-weight-normal"},"請先登入",-1),B={class:"col-md-4"},C={class:"form-floating mb-3"},j=s("label",{for:"username"},"帳號",-1),q={class:"form-floating mb-3"},A=s("label",{for:"password"},"密碼",-1),L={key:0,class:"btn btn-lg w-100 mt-3 btn-primary",type:"button",disabled:""},N=s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),z=[N],D={key:1,class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"};function P(c,m,u,a,e,o){const n=i("VField"),r=i("VErrorMessage"),b=i("VForm");return l(),d("section",x,[s("div",M,[$,s("div",B,[t(b,{class:"text-start fs-6","validation-schema":o.schema,onSubmit:o.handleSubmit},{default:S(({errors:p})=>[s("div",C,[t(n,{id:"account",name:"account",type:"email",class:h(["form-control",{"is-invalid":p.account}]),placeholder:"請輸入帳號"},null,8,["class"]),j,t(r,{name:"account",class:"invalid-feedback"})]),s("div",q,[t(n,{id:"password",name:"password",type:"password",class:h(["form-control",{"is-invalid":p.password}]),placeholder:"請輸入密碼"},null,8,["class"]),A,t(r,{name:"password",class:"invalid-feedback"})]),c.loadingStatus?(l(),d("button",L,z)):(l(),d("button",D,"登入"))]),_:1},8,["validation-schema","onSubmit"])])])])}const J=k(E,[["render",P]]);export{J as default};
