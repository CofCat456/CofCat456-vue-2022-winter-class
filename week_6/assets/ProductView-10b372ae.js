import{S as u}from"./sweetalert2.all-42d947dd.js";import{L as v}from"./Loading-c670b5d3.js";import{B as y,c as C}from"./Breadcrumb-d3859957.js";import{c as x,a as B,b as w}from"./api-18922eb0.js";import{_,o as c,c as d,b as t,F as b,e as P,r as m,a as p,n as L,t as n,h as k,v as q,d as N,f as T}from"./index-76b41b60.js";const U={props:{imagesUrl:{type:Array,default:()=>[]}}},V=t("nav",null,[t("div",{class:"nav nav-tabs mb-3 d-flex",id:"nav-tab",role:"tablist"},[t("button",{class:"nav-link w-25 active",id:"nav-images-tab","data-bs-toggle":"tab","data-bs-target":"#nav-images",type:"button",role:"tab","aria-controls":"nav-images","aria-selected":"true"}," 產品照片 ")])],-1),A={class:"tab-content",id:"nav-tabContent"},S={class:"tab-pane fade show active",id:"nav-images",role:"tabpanel","aria-labelledby":"nav-images-tab",tabindex:"0"},j=["src"];function D(r,s,i,h,e,o){return c(),d(b,null,[V,t("div",A,[t("div",S,[(c(!0),d(b,null,P(i.imagesUrl,l=>(c(),d("div",{key:l,class:"ratio ratio-4x3 mb-4"},[t("img",{src:l,class:"img-fluid object-fit-cover"},null,8,j)]))),128))])])],64)}const F=_(U,[["render",D]]),M={components:{Loading:v,Breadcrumb:y,ProductContent:F},data(){return{product:null,qty:1}},computed:{getBreadcrumb(){return[{title:"首頁",pathName:"Home"},{title:"產品列表",pathName:"ProductList"},{title:this.product.title}]},getPrice(){return x(this.product.price,"NT ")}},methods:{getBadgeColor(r){return`text-bg-${C.get(r)||"secondary"}`},getProduct(r){this.$refs.loading.show(),B(r).then(s=>{const{data:{product:i}}=s;this.product=i,this.$refs.loading.hide()}).catch(s=>{console.log(s),u.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,icon:"error",title:"商品不存在"}),this.$router.push({name:"ProductList"}),this.$refs.loading.hide()})},plus(){this.qty+=1},dash(){this.qty-=1},addToCart(){this.$refs.loading.show();const r={product_id:this.product.id,qty:this.qty};w({data:r}).then(()=>{this.$refs.loading.hide(),u.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,icon:"success",title:"增加購物車成功(๑•́ ₃ •̀๑)!"})}).catch(s=>{const{response:{data:{message:i}}}=s;this.$refs.loading.hide(),u.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,icon:"error",title:"增加購物車失敗",text:i})})}},mounted(){const{id:r}=this.$route.params;this.getProduct(r)}},$={class:"container py-5"},z={key:0,class:"row"},E={class:"col-12"},H={class:"col-md-6"},G={class:"ratio ratio-4x3"},I=["src","alt"],J={class:"col-md-6 d-flex flex-column align-items-start ps-md-3"},K={class:"mb-3 fw-bold"},O={class:"flex-fill"},Q={class:"mb-3 fw-bold"},R={class:"input-group w-50 mb-3"},W=t("i",{class:"bi bi-dash"},null,-1),X=[W],Y={class:"input-group-text"},Z=t("i",{class:"bi bi-plus"},null,-1),tt=[Z],st={class:"w-100 d-flex mb-3"},et=t("i",{class:"bi bi-cart-plus"},null,-1),ot={class:"col mt-5"};function rt(r,s,i,h,e,o){const l=m("Breadcrumb"),g=m("ProductContent"),f=m("Loading");return c(),d("div",$,[e.product?(c(),d("div",z,[t("div",E,[p(l,{breadcrumbList:o.getBreadcrumb},null,8,["breadcrumbList"])]),t("div",H,[t("div",G,[t("img",{src:e.product.imageUrl,class:"img-fluid object-fit-cover rounded",alt:e.product.title},null,8,I)])]),t("div",J,[t("span",{class:L(["badge mb-3",o.getBadgeColor(e.product.category)])},n(e.product.category),3),t("h2",K,n(e.product.title),1),t("p",O,n(e.product.description),1),t("h2",Q,n(o.getPrice),1),t("div",R,[t("button",{class:"btn btn-outline-secondary",type:"button",onClick:s[0]||(s[0]=(...a)=>o.dash&&o.dash(...a))},X),k(t("input",{type:"text",class:"form-control",min:"1","aria-label":"商品購買數量",readonly:"","onUpdate:modelValue":s[1]||(s[1]=a=>e.qty=a)},null,512),[[q,e.qty]]),t("span",Y,n(e.product.unit),1),t("button",{class:"btn btn-outline-secondary",type:"button",onClick:s[2]||(s[2]=(...a)=>o.plus&&o.plus(...a))},tt)]),t("div",st,[t("button",{type:"button",class:"btn btn-primary w-50 py-2",onClick:s[3]||(s[3]=(...a)=>o.addToCart&&o.addToCart(...a))},[et,N(" 加入購物車 ")])])]),t("div",ot,[p(g,{imagesUrl:e.product.imagesUrl},null,8,["imagesUrl"])])])):T("",!0),p(f,{ref:"loading"},null,512)])}const lt=_(M,[["render",rt]]);export{lt as default};
