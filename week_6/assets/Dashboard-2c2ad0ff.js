import{H as m}from"./HeaderBasic-bfcfad1f.js";import{L as d}from"./Loading-4fb4e3ea.js";import{S as i}from"./sweetalert2.all-cf7836bc.js";import{h as u,i as h,t as p}from"./api-4abfc6b0.js";import{_ as l,r as e,o as g,c as f,a as t,F as L}from"./index-fe0b81cf.js";const _={components:{HeaderBasic:m,Loading:d},computed:{getHeaderList(){return[{title:"第六週主線任務",pathName:"AdminHome"},{title:"產品管理",pathName:"AdminProductList"},{title:"訂單管理",pathName:"AdminOrders"}]}},methods:{logout(){u().then(()=>{i.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,icon:"success",title:"登出成功 ฅ●ω●ฅ"}),this.$router.push({name:"Login"})})},expiredToken(){i.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,icon:"error",title:"token 已過期 (′゜ω。‵)"}),this.$router.push({name:"Login"})},checkLogin(){this.$refs.loading.show(),h().then(o=>{const{data:{success:r}}=o;this.$refs.loading.hide(),r||this.$router.push({name:"Login"})}).catch(()=>{this.$refs.loading.hide(),this.$router.push({name:"Login"})})}},mounted(){if(!p){this.expiredToken();return}this.checkLogin()}};function k(o,r,B,$,H,s){const n=e("HeaderBasic"),a=e("RouterView"),c=e("Loading");return g(),f(L,null,[t(n,{headerList:s.getHeaderList,logout:s.logout},null,8,["headerList","logout"]),t(a),t(c,{ref:"loading"},null,512)],64)}const P=l(_,[["render",k]]);export{P as default};
