import{F as g,a as w,E as v,c as V,b as _}from"./object-158d4a92.js";import{S as h}from"./sweetalert2.all-cf7836bc.js";import{l as S}from"./api-4abfc6b0.js";import{_ as k,r as i,o as c,c as l,b as s,a as t,w as y,n as f}from"./index-fe0b81cf.js";const F={components:{VForm:g,VField:w,VErrorMessage:v},data:()=>({loadingStatus:!1}),computed:{schema(){return V({account:_().email("請輸入正確的 Email 格式 ㅍ_ㅍ!!").required("請輸入 Email !!"),password:_().min(6,"密碼長度不得小於 6").required("請輸入密碼!!")})}},methods:{handleSubmit(r){this.loadingStatus=!0;const{account:d,password:m}=r;S({username:d,password:m}).then(e=>{const{data:{success:o,token:a,expired:n}}=e;o&&(h.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,icon:"success",title:"登入成功 (*‘ v`*)"}),document.cookie=`token=${a};expires=${new Date(n)};`,this.loadingStatus=!1,this.$router.push({name:"AdminProductList"}))}).catch(e=>{const{response:{message:o}}=e;h.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,icon:"error",title:"登入失敗",text:o}),this.loadingStatus=!1})}}},x={class:"container position-absolute top-50 start-50 translate-middle text-center"},E={class:"row justify-content-center"},B=s("h1",{class:"h3 mb-4 font-weight-normal"},"請先登入",-1),$={class:"col-md-4"},C={class:"form-floating mb-3"},M=s("label",{for:"username"},"帳號",-1),P={class:"form-floating mb-3"},q=s("label",{for:"password"},"密碼",-1),A={key:0,class:"btn btn-lg w-100 mt-3 btn-primary",type:"button",disabled:""},L=s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),N=[L],j={key:1,class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"};function z(r,d,m,e,o,a){const n=i("VField"),u=i("VErrorMessage"),b=i("VForm");return c(),l("section",x,[s("div",E,[B,s("div",$,[t(b,{class:"text-start fs-6","validation-schema":a.schema,onSubmit:a.handleSubmit},{default:y(({errors:p})=>[s("div",C,[t(n,{id:"account",name:"account",type:"email",class:f(["form-control",{"is-invalid":p.account}]),placeholder:"請輸入帳號"},null,8,["class"]),M,t(u,{name:"account",class:"invalid-feedback"})]),s("div",P,[t(n,{id:"password",name:"password",type:"password",class:f(["form-control",{"is-invalid":p.password}]),placeholder:"請輸入密碼"},null,8,["class"]),q,t(u,{name:"password",class:"invalid-feedback"})]),r.loadingStatus?(c(),l("button",A,N)):(c(),l("button",j,"登入"))]),_:1},8,["validation-schema","onSubmit"])])])])}const J=k(F,[["render",z]]);export{J as default};
